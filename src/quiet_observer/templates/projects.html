{% extends "base.html" %}
{% block title %}Projects – Quiet Observer{% endblock %}
{% block content %}
<div class="page-header">
  <h1>Projects</h1>
  <a href="/projects/new" class="btn btn-primary">+ New Project</a>
</div>

{% if projects %}
<div class="project-grid">
  {% for project in projects %}
  <div class="card">
    <div class="card-header">
      <h2><a href="/projects/{{ project.id }}">{{ project.name }}</a></h2>
      <div class="badges">
        {% if project.capture_active %}<span class="badge badge-green">capturing</span>{% endif %}
        {% if project.inference_active %}<span class="badge badge-blue">inferring</span>{% endif %}
      </div>
    </div>
    <p class="text-muted">{{ project.youtube_url[:60] }}{% if project.youtube_url|length > 60 %}…{% endif %}</p>
    <div class="card-meta">
      <span>Capture: {{ project.capture_interval_seconds }}s</span>
      <span>Inference: {{ project.inference_interval_seconds }}s</span>
    </div>
    {% if project.last_capture_at %}
    <p class="text-muted text-sm">Last capture: {{ project.last_capture_at.strftime('%Y-%m-%d %H:%M') }}</p>
    {% endif %}
    <div class="card-actions">
      <a href="/projects/{{ project.id }}" class="btn btn-sm">Open</a>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="empty-state">
  <p>No projects yet.</p>
  <a href="/projects/new" class="btn btn-primary">Create your first project</a>
</div>
{% endif %}
{% endblock %}
